<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
>
<head>
  <th:block th:insert="~{fragments/fragment-header :: meta}"></th:block>
  <th:block th:insert="~{fragments/fragment-header :: title}"></th:block>
  <th:block th:insert="~{fragments/fragment-header :: link}"></th:block>
</head>
<body>
<div class="sticky-top" th:insert="fragments/fragment-header :: header"></div>
<div class="container">
  <div class="row">
    <div class="col-sm-8 offset-sm-2 border-dark shadow bg-white rounded">
      <h2 style="text-align:center;">Add Category</h2>
      <div class="alert alert-info" th:if="${added == true}">
        Category added.
      </div>
      <form action="#" th:action="@{/category}" th:object="${categoryDto}" method="post">
        <div class="alert alert-danger" th:if="${#fields.hasGlobalErrors()}">
          <p th:each="err : ${#fields.globalErrors()}" th:text="${err}"></p>
        </div>
        <input id="catSize" type="hidden" th:value="${#lists.size(categoryDto.categories)}">
        <div id="categoryDiv">
          <div class="form-group form-row" th:each="category,categoryStat : *{categories}">
            <label th:for="categories[__${categoryStat.index}__].name"
                   class="col-sm-2 col-form-label">Category</label>
            <div class="col-sm-10">
              <input required type="text" class="form-control input-sm catInput"
                     th:field="*{categories[__${categoryStat.index}__].name}">
            </div>
          </div>
        </div>
        <div class="form-group form-row">
          <div class="col-sm-10 offset-sm-2">
            <a id="addCategory" class="btn btn-success">Add More</a>
            <input class="btn btn-primary" type="submit" value="Submit">
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<th:block th:insert="~{fragments/fragment-header :: body/script}"></th:block>
<script th:src="@{/js/category.js}"></script>
</body>
</html>