<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <th:block th:insert="~{fragments/fragment-header :: meta}"></th:block>
  <th:block th:insert="~{fragments/fragment-header :: title}"></th:block>
  <th:block th:insert="~{fragments/fragment-header :: link}"></th:block>
</head>
<body>
<th:block th:insert="fragments/fragment-header :: header"></th:block>
<div class="container">
  <div class="row">
      <div class="col-lg-12 overflow-auto bg-white">
      <table class="table table-striped table-bordered table-lg mt-1">
        <caption class="ml-2">List of questions- <span class="text-success ml-2">&#10003; indicates correct option</span></caption>
        <thead class="thead-dark">
        <tr>
          <th scope="col">Question</th>
          <th scope="col">Category</th>
          <th scope="col">Option 1</th>
          <th scope="col">Option 2</th>
          <th scope="col">Option 3</th>
          <th scope="col">Option 4</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${questions.empty}">
          <th scope="row">No questions available</th>
        </tr>
        <tr th:each="question : ${questions}">
          <td><span th:classappend="${#strings.length(question.text)>20} ? 'text-truncate'" th:text="${question.text}"> Text </span></td>
          <td><span th:text="${question.category.name}"> Category </span></td>
          <td th:each="option : ${question.options}">
            <span th:classappend="${#strings.length(option.value.text)>20} ? 'text-truncate'" th:text="${option.value.text}"> Option </span>
            <span th:if="${option.value.correct == true}" class="text-success ml-2">&#10003;</span>
          </td>
        </tr>
        </tbody>
      </table>

      <nav aria-label="Pagination" th:if="${questions.totalPages gt 1}">
        <ul class="pagination justify-content-center font-weight-medium">
          <li class="page-item" th:if="${questions.hasPrevious()}">
            <a class="page-link svg-icon"
               th:href="@{/questions?page={id}(id=${questions.number lt 2 ? 1 : questions.number})}"
               aria-label="Previous"
               title="Previous Page" rel="tooltip">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item" th:classappend="${i eq questions.number + 1} ? 'active'"
              th:each="i : ${#numbers.sequence( 1, questions.totalPages > 10 + questions.number
               ? questions.number + 10 : questions.totalPages, 1)}">
            <a class="page-link" th:href="@{/questions(page=${i})}" th:text="${i}"
               th:title="${'Page '+ i}"
               rel="tooltip"></a>
          </li>
          <li class="page-item disabled" th:if="${questions.number + 10 < questions.totalPages}">
            <a class="page-link svg-icon" href="#">
              <span aria-hidden="true">...</span>
            </a>
          </li>
          <li class="page-item" th:if="${questions.hasNext()}">
            <a class="page-link svg-icon" th:href="@{/questions(page=${questions.number + 2})}"
               aria-label="Next"
               title="Next Page" rel="tooltip">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
<th:block th:insert="~{fragments/fragment-header :: body/script}"></th:block>
</body>
</html>